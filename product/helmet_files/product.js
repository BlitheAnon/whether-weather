const isInViewport=el=>{if(!(window.innerWidth>1024)&&el){let elTop=el.getBoundingClientRect().top+window.scrollY,elBottom=elTop+el.clientHeight,viewportTop=document.documentElement.scrollTop,viewportBottom=viewportTop+window.innerHeight;if(elTop)return elBottom>viewportTop&&elTop<viewportBottom}},stickyCart=()=>{const productControlsContainer=document.querySelectorAll(".product-controls-container")[0],stickyAddToCart=document.querySelector(".sticky-add-to-cart");!stickyAddToCart||!productControlsContainer||(isInViewport(productControlsContainer)?stickyAddToCart.classList.contains("active")&&stickyAddToCart.classList.remove("active"):stickyAddToCart.classList.add("active"))},warrningModal=()=>{const toggleBtns=document.querySelectorAll(".toggle-warning-modal"),closeBtn=document.querySelector(".close-warning-modal"),warningModal=document.querySelector(".warning-modal-wrapper"),noticeWrapper=document.querySelector(".product-notice-wrapper"),noticeAgreeBtn=document.querySelector(".product-warning-container .product-notice-agree-btn"),actionsAgreeBtn=document.querySelector(".actions-wrapper .product-notice-agree-btn"),noticeCheckbox=document.querySelector(".product-notice-box"),swatches=[...document.querySelectorAll(".option-element")],swatchDropdown=[...document.querySelectorAll(".swatch-dropdown")];!toggleBtns.length||!noticeAgreeBtn||!noticeWrapper||(toggleBtns.forEach(btn=>{btn.addEventListener("click",function(){warningModal.classList.add("show"),noticeAgreeBtn.disabled=!1})}),noticeWrapper.addEventListener("click",function(){warningModal.classList.remove("show"),noticeAgreeBtn.disabled=!1}),closeBtn.addEventListener("click",function(){warningModal.classList.remove("show")}),noticeAgreeBtn.addEventListener("click",function(){warningModal.classList.remove("show"),noticeCheckbox.checked=!0,actionsAgreeBtn.disabled=!1,swatches.forEach(swatch=>{swatch.classList.contains("active")||(swatch.disabled=!1,swatch.classList.add("active"))}),swatchDropdown.forEach(swatch=>{swatch.classList.contains("active")||(swatch.disabled=!1,swatch.classList.add("active"))}),document.querySelectorAll(".product-controls-container .product-notice-agree-btn").forEach(btn=>btn.remove()),document.querySelectorAll(".payment-button-wrapper").length>0&&(document.querySelector(".cloned-addtocart-button, .payment-button-wrapper").style="display: block;",document.querySelector(".payment-button-wrapper").style="display: block;"),document.querySelectorAll(".product-form__submit").forEach(btn=>btn.style="display: block")}))},productPageImage=()=>{const mainImg=this.document.querySelector(".product__media-list"),carousel=this.document.querySelector(".product__media-list-container");if(!mainImg||!carousel)return;let mainImgHeight=mainImg.getBoundingClientRect().height;this.document.querySelector(".product__media-list-container").style=`height: ${mainImgHeight}px`},shippingCostsModal=()=>{document.querySelectorAll(".shipping-cost-table-headers th").length>3&&(document.querySelector(".shipping-cost-table").classList.add("overflow-x"),document.querySelector(".shipping-cost-table tbody").classList.add("width-with-scroll"))},productClearCart=()=>{const onlyItemNotice=document.querySelector(".only-item-notice"),editCartPopup=document.querySelector("#ProductPopup-edit-cart"),buttonsWrapper=document.querySelector(".buttons-wrapper"),emptyCartBtns=document.querySelectorAll(".empty-cart-actions .button-group .empty-cart, .edit-cart-modal .empty-cart");onlyItemNotice&&editCartPopup?(buttonsWrapper&&(buttonsWrapper.display="none"),document.querySelectorAll(".product-notice-banner, .sticky-add-to-cart .product-notice").forEach(el=>{el.style.pointerEvents="none"})):(buttonsWrapper&&(buttonsWrapper.style=""),document.querySelectorAll(".product-notice-banner, .sticky-add-to-cart .product-notice").forEach(el=>{el.style.pointerEvents="auto"})),document.querySelector(".empty-cart-actions .button-group .empty-car")?document.querySelectorAll("variant-radios, .product-form__quantity, .cta-buttons-wrapper, .swatch-dropdown").forEach(el=>{el.style.display="none"}):document.querySelectorAll("variant-radios, .product-form__quantity, .cta-buttons-wrapper, .swatch-dropdown").forEach(el=>{el.style=""}),emptyCartBtns.length>0?emptyCartBtns.forEach(btn=>{btn.addEventListener("click",async function(e){e.preventDefault();try{(await fetch("/cart/clear.js",{method:"POST"})).ok?(document.querySelector(".cart-count-bubble > span").textContent="0",document.querySelector(".only-item-notice")?.classList?.remove("only-item-notice"),document.querySelectorAll("variant-radios, .product-form__quantity, .cta-buttons-wrapper, .swatch-dropdown, .product-notice, .sticky-add-to-cart :nth-child(3)").forEach(el=>el.style=""),document.querySelectorAll(".empty-cart-actions, .cloned-empty-cart-actions, .product-notice-only-item").forEach(el=>el.style.display="none"),document.querySelector("#PopupModal-edit-cart").removeAttribute("open"),document.body.classList.remove("overflow-hidden"),document.querySelector(".buttons-wrapper").style="",document.querySelectorAll(".product-notice-banner, .sticky-add-to-cart .product-notice").forEach(el=>el.style="pointer-events: auto"),editCartPopup&&editCartPopup.remove()):console.error("Something went wrong Clearing Cart")}catch(e2){console.error("Something went wrong Clearing Cart",e2)}})}):document.querySelectorAll("variant-radios, .product-form__quantity, .cta-buttons-wrapper, .swatch-dropdown").forEach(el=>{el.style=""})};class StickySwatches{constructor(){this.swatch=document.querySelector("variant-radios"),this.variantsSelects=document.querySelector("variant-selects"),this.swatchRadio=document.querySelectorAll('.product-variant-options-wrapper input[type="radio"]'),this.stickyAddToCartWrapper=document.querySelector(".sticky-add-to-cart"),this.swatchDropdownTrigger=document.querySelectorAll(".swatch-dropdown-trigger"),this.swatchDropdownModal=document.querySelectorAll(".swatch-dropdown-modal"),this.dropdownItemOption=document.querySelectorAll(".dropdown-item-option"),this.productDetailsWrapper=document.querySelector(".product__info-wrapper"),this.clonedAddTocartWrapper=document.querySelector(".cloned-addtocart-button"),this.stickySwatches=document.querySelector("#stickySwatches"),this.init()}setSoldoutOptions(){const swatchDropdownModals=[...document.querySelectorAll(".swatch-dropdown-modal ul")];if(this.swatch){const variantOptions=[...document.querySelectorAll(".product-variant-options-wrapper")];for(let i=0;i<swatchDropdownModals.length;i++)for(let j=0;j<swatchDropdownModals[i].children.length;j++)variantOptions[i]?.children[j]?.children[0]?.classList?.contains("disabled")?(swatchDropdownModals[i].children[j].classList.remove("available"),swatchDropdownModals[i].children[j].classList.add("disabled"),swatchDropdownModals[i].children[j].classList.add("soldout"),swatchDropdownModals[i].children[j].classList.add("klaviyo-bis-trigger")):(swatchDropdownModals[i].children[j].classList.remove("disabled"),swatchDropdownModals[i].children[j].classList.remove("soldout"),swatchDropdownModals[i].children[j].classList.remove("klaviyo-bis-trigger"),swatchDropdownModals[i].children[j].classList.add("available"))}}getDropdownOption(swatchRadioElem){var optionIndex=document.querySelector(swatchRadioElem).parentElement.parentElement.getAttribute("option-index"),optionValue=swatchRadioElem.value,selectedDropdown=this.stickyAddToCartWrapper.querySelector("[data-dropdown-index='"+optionIndex+"']");selectedDropdown.querySelectorAll("li").forEach(li=>{li.removeClass("selected")});var selectedOption=selectedDropdown.querySelector("li[data-value='"+optionValue+"']");selectedOption.classList.add("selected"),selectedDropdown.querySelector(".swatch-dropdown-trigger").texContent=optionValue}closeModal(){this.swatchDropdownModal.forEach(modal=>{modal.classList.remove("modal-open")})}cloneEmptyCartButton(){const emptyCartActionsForm=document.querySelector(".empty-cart-actions .form"),clonedActionsFormElement=document.querySelector(".cloned-empty-cart-actions");if(!emptyCartActionsForm)return;const emptyCartActionFormElement=emptyCartActionsForm.cloneNode(!0);clonedActionsFormElement.appendChild(emptyCartActionFormElement)}init(){var _that=this;this.swatchDropdownTrigger.forEach(trigger=>{trigger.addEventListener("click",function(){_that.closeModal(),this.nextElementSibling.classList.toggle("modal-open"),_that.setSoldoutOptions()})}),document.querySelectorAll(".close-swatch-modal").forEach(close=>{close.addEventListener("click",function(){_that.closeModal()})}),this.setSoldoutOptions(),this.cloneEmptyCartButton(),this.swatch?this.dropdownItemOption.forEach(option=>{option.addEventListener("click",function(){const swatchValue=option.dataset.value,swatchItem=_that.swatch.querySelector("input[value='"+swatchValue+"']"),swatchName=swatchItem.getAttribute("name"),stickySwatchFormInput=_that.stickySwatches.querySelector(`input[name=${swatchName}]`);stickySwatchFormInput.value=swatchValue,swatchItem.dispatchEvent(new MouseEvent("click")),_that.closeModal()})}):this.dropdownItemOption.forEach(option=>{option.addEventListener("click",function(){const optionValue=option.dataset.value,optionVariant=option.dataset.variant,variantSelect=_that.variantsSelects.querySelector("select[name='options["+optionVariant+"]']"),stickySwatchFormInput=_that.stickySwatches.querySelector(`input[name=${optionVariant}]`);variantSelect.value=optionValue,stickySwatchFormInput.value=optionValue,variantSelect.dispatchEvent(new Event("change",{bubbles:!0})),_that.closeModal()})})}}class PriceWithDynamicTaxes{constructor(){this.countriesWithDynamicTaxes=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"]}addNoteAboutVat(countryCode){this.countriesWithDynamicTaxes.some(element=>element===countryCode)&&document.querySelectorAll(".price-taxes-info").forEach(element=>{const spanElement=document.createElement("span");spanElement.classList.add("taxes-note"),spanElement.setAttribute("id","taxes-note"),spanElement.textContent=`*${window.variantStrings.include_taxes}`,element.appendChild(spanElement)})}}window.StickySwatches=new StickySwatches,window.PriceWithDynamicTaxes=new PriceWithDynamicTaxes,window.addEventListener("resize",stickyCart),window.addEventListener("scroll",stickyCart),window.addEventListener("resize",productPageImage),window.dispatchEvent(new Event("resize")),warrningModal(),productClearCart();
//# sourceMappingURL=/cdn/shop/t/12/assets/product.js.map?v=149103632770527941811740507369
