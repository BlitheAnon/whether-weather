var e,o,i;import{c as t}from"./client-CfnaZSSf.js";import{U as r,A as s}from"./AnalyticsProvider-BtQf1FJI.js";import{g as n}from"./browser-DTnFfc4f.js";import{C as a}from"./CountriesProvider-BArhoZEJ.js";import{E as l}from"./ErrorBoundary-BDGJBfMx.js";import{P as m}from"./PageLoaded-jewSZDIY.js";import{T as c,a as p,b as u}from"./ThemeProvider-BanM0tOi.js";import{u as d,A as f}from"./getIsEmailHintUser-Df-RzS1C.js";import{F as h}from"./flow-fxuIzq6a.js";import{a as g,C as j}from"./analyticsContext-DEbqzALk.js";import"./runtime-CB_fpiHu.js";import"./global.module-B84Jz_1N.js";import{x as _,u as v,d as y,y as C,T as b}from"./jsxRuntime.module-BVgM4NZG.js";import{c as w,S}from"./account-rlVNNhOe.js";import{A as P}from"./Authorize-DdPGnzGZ.js";import{a as x}from"./usePostMessageListener-DIb7q0-M.js";import{u as I}from"./usePostMessage-sY8nBV5K.js";import{u as A}from"./usePrequalMetaData-D_3jFw6q.js";import{L as E}from"./Link-Dt0Kd_jc.js";import{T as q}from"./constants-BTP5l_bb.js";import"./constants-OAvCAmL5.js";import"./url-540XmIx-.js";import"./utilities-DMsKgeWp.js";import"./events-nBRsFxiJ.js";/* empty css                 */import"./CodeInput-CUEsaHBE.js";import"./useResizeObserver-CI3DCDl4.js";import"./UserCard-B5pWqQFT.js";import"./Avatar-FjFkVnXO.js";import"./index-CcAHxhNC.js";import"./SpriteIcon-BGWqPhx5.js";import"./useIdentityTexts-2d9nTU8v.js";import"./useWebauthnConditionalUI-O1uo9AXb.js";import"./account-DIMFFb9z.js";import"./index-B-Ooo1SP.js";import"./webauthn-json.browser-ponyfill-HrfiiD6N.js";import"./utils-C0l7MwGm.js";import"./browser-j_E9dKoZ.js";import"./Captcha-C4_YYkgT.js";import"./assertThisInitialized-PUtynf78.js";import"./inheritsLoose-BGGu9yWi.js";import"./useComputedValue-8789pLuA.js";import"./index-gozUT9gg.js";import"./Section-CXcjV0Lb.js";import"./usePointOfSale-BPF7fXJ_.js";import"./Button-sFT7e-9y.js";import"./AnimatedShopLogo-B3ULCQPa.js";import"./Notification-DzRmFDQN.js";import"./Icon-D_8oRoah.js";import"./UIContextProvider-BqdgvvZY.js";import"./Errors-dxQHRa1o.js";import"./Heading-BK0Xs22M.js";import"./Button-C9jBwgo6.js";import"./Input-CKRZB9F_.js";import"./Tooltip-9JAdvLDJ.js";import"./FlagInput-kDmB-_J5.js";import"./preload-helper-DAEorhsY.js";import"./formatter-90enlX0X.js";import"./DoubleSpinnerIcon-CrtcNBvD.js";import"./use-event-listener-D169crJZ.js";import"./authorizeEvents-CJkr-ki4.js";import"./AuthorizeOneClick-Cpuv4tGb.js";import"./string-DLp-Jznw.js";import"./VisibilityTransition-As10XYx3.js";import"./useServerErrorMessage-BciniEUN.js";import"./AuthorizeConfirm-DYyrxCjn.js";import"./AutoSubmitForm-7cCexZ4Q.js";import"./EmailEllipsis-Cri4DoYl.js";function U({analyticsContext:e,accessToken:o}){const{prequalifiedAmount:i}=A(),[t,r]=y(!1),{flow:s,flowVersion:n,targetOrigin:a,signUpEnabled:l,user:m,dispatchSubmittedEmail:p}=d(),{messageLoaded:u,messageResized:f,messageShopUserMatched:h,messageShopUserNotMatched:j,messageLoginComplete:U,messageCustomFlowSideEffect:k,messageError:T,messageCloseRequested:z}=I(a,!1);x({onEscapeKeypress:z}),C((()=>{m&&r(Boolean(m.installments_onboarded))}),[m]);const{authorizeTexts:B}=function(e,o){const{translate:i}=_(c),{client:t}=d(),r=o===q.LoginWithShopSelfServe?i("confirm.new_accounts.login_sms_footer"):i("confirm.default.login_sms_footer",{store_name:t.name}),s={title:i("confirm.prequal.login_title"),description:"",footer:r},n={title:i("settings.login.webauthn_verification.title"),description:i("settings.login.webauthn_verification.description"),footer:r},a=e?{title:i("confirm.prequalified.one_click_title"),description:"",footer:i("confirm.prequal.one_click_footer")}:{title:i("confirm.prequal.one_click_title"),description:i("confirm.prequal.one_click_description"),footer:i("confirm.prequal.one_click_footer")};return{authorizeTexts:{login:{email_step:s,sms_verification_step:{title:i("confirm.default.login_sms_title"),description:({phoneNumber:e})=>i("confirm.default.login_sms_description",{phoneNumber:e||""}),footer:r},captcha_step:{title:i("accounts.login.captcha.hcaptcha_header"),description:"",footer:""},phone_step:s,email_sign_up_step:s,email_verification_step:s,webauthn_verification_step:n},sign_up:{phone_step:{title:i("confirm.default.signup_title"),description:i("confirm.default.signup_description"),footer:i("confirm.legal_html",{terms_of_service:v(E,{href:window.ShopifyPay.Config.termsOfServicePath,external:!0,children:i("general.terms_of_service")},"tos-link"),privacy_policy:v(E,{href:window.ShopifyPay.Config.privacyPolicyPath,external:!0,children:i("confirm.privacy_policy")},"privacy-link")})},sms_verification_step:{title:i("confirm.default.login_sms_title"),description:({phoneNumber:e})=>i("confirm.default.login_sms_description",{phoneNumber:e||""}),footer:r},captcha_step:{title:i("accounts.login.captcha.hcaptcha_header"),description:"",footer:""},email_step:s,email_sign_up_step:s,email_verification_step:s,webauthn_verification_step:n},one_click:a}}}(Boolean(i),e);if(!b((()=>g.includes(e)),[e]))return T({code:w.InvalidAnalyticsContext,message:`Invalid analytics_context '${e}'. Must be one of: ${g.join(", ")}`}),null;return v(P,{...{disallowUserChange:!1,texts:B,trackingSetup:{context:e,flow:s,flowVersion:n},accessToken:o,onLoaded:u,onResized:f,onUserFound:h,onUserNotFound:j,onTokenReturned:function(e){p(e.email),U({...e,loggedIn:!0})},onCaptchaChallenge:e=>T({code:w.CaptchaChallenge,message:S.CaptchaChallenge,email:e}),onCancel:()=>{l||z()},onError:T,onConfirmSuccess:function(){k({flow:"prequal",shopPayInstallmentsOnboarded:t})},onUserVerification:function(e){r(Boolean(e.userRecord.installments_onboarded))},onUserConfirm:function(e,o,i){i&&r(!0)}}})}const k=n("analytics-context"),T=n("analytics-trace-id"),z=n("client"),B=n("confirm-params"),L=Boolean(n("dev-mode")),R=n("dictionary"),M=n("authentication-level-required"),N=null==(e=n("flow-version"))?void 0:e.toString(),O=n("shop-permanent-domain"),F=Boolean(n("sign-up-enabled")),V=null==(o=n("target-origin-url"))?void 0:o.toString(),D=n("user"),H=null==(i=n("access-token"))?void 0:i.toString(),K={uiSection:r.AuthorizePrequal,clientUuid:z.uuid,analyticsTraceId:T,...D&&{shopAccountUuid:D.shop_account_uuid}},$={client:z,confirmParams:B,devMode:L,authenticationLevelRequired:M,flow:h.Prequal,flowVersion:N,shopPermanentDomain:O,signUpEnabled:F,targetOrigin:V,user:D},G=n("compact-layout");var J;J=document.getElementById("app"),t(J).render(v(l,{bugsnagApiKey:window.ShopifyPay.Config.bugsnagApiKey,sectionName:"AuthorizePrequal",children:v(j.Provider,{value:G,children:v(s,{...K,children:v(m,{origin:"authorize_default",children:v(p,{dictionary:R,children:v(u,{children:v(a,{children:v(f,{...$,children:v(U,{analyticsContext:k,accessToken:H})})})})})})})})}));
